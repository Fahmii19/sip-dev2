<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peta Perijinan dan Investasi DKI Jakarta</title>

    <link rel="icon" href="assets/gambar/favicon.ico">

    <!-- Bootstrap CSS -->
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="assets/bootstrap/bootstrap.min.css">

    <!-- Icon -->
    <link rel="stylesheet" href="assets/css/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/remix-icon/remixicon.css">

    <!-- MAPBOX -->
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />

    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.2.2/mapbox-gl-draw.css" type="text/css">

    <!-- custom -->
    <link rel="stylesheet" href="assets/css/custom_sidebar.css">

</head>

<body>

<div class="container-map">
    <div id='map' class="wm-map mapboxgl-map mode-simple_select mouse-none">

        <div class="map-overlay" id="features">
            <strong class="border-bottom">Detail Omzet</strong>
            <div id="pd">
                <div>Kelurahan : CENGKARENG TIMUR</div>
            <p class="mb-0"><strong><em>Rp 7.890.730.000</em></strong></p>
            </div>
        </div>

        <div class="map-overlay" id="legends">
            <div><span class="legend-key" style="background-color: rgb(255, 237, 160);"></span><span>0-4M</span></div>

            <div><span class="legend-key" style="background-color: rgb(255, 230, 117);"></span><span>5M-8M</span></div>
            <div><span class="legend-key" style="background-color: rgb(255, 223, 82);"></span><span>9M-12M</span></div><div><span class="legend-key" style="background-color: rgb(255, 214, 31);"></span><span>13M-16M</span></div><div><span class="legend-key" style="background-color: rgb(224, 183, 0);"></span><span>17M-20M</span></div><div><span class="legend-key" style="background-color: rgb(202, 165, 2);"></span><span>&gt; 20M</span></div></div>


    </div>
</div>




    <!-- Peta -->


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="assets/js/jquery-3.3.1.slim.min.js" rel="preload"></script>

    <!-- <script src="assets/js/popper.min.js" rel="preload"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

    <!-- <script src="assets/js/bootstrap.min.js" rel="preload"></script> -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script src="assets/js/Chart.min.js"></script>

    <script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
    <script src="https://unpkg.com/@turf/turf@6/turf.min.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.2.2/mapbox-gl-draw.js"></script>




    <!-- MAP BOX -->
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoibWVudGhvZWxzciIsImEiOiJja3M0MDZiMHMwZW83MnVwaDZ6Z2NhY2JxIn0.vQFxEZsM7Vvr-PX3FMOGiQ';
        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/menthoelsr/ckp4wrapq11m117pf2lr49l5t',
        });

        map.on('load', () => {
            const layers = map.getStyle().layers;
            // Find the index of the first symbol layer in the map style
            let firstSymbolId;
            for (const layer of layers) {
                if (layer === ' ') {
                    firstSymbolId = layer.id;
                    break;
                }
            }

            map.addSource('wilayah', {
                'type': 'geojson',
                'data': 'http://103.214.112.123:3000/choro'
            });
            map.addLayer({
                    'id': 'wilayah-fill',
                    'type': 'fill',
                    'source': 'wilayah',
                    'paint': {
                        'fill-color': [
                            "interpolate",
                            ["linear"],
                            ["get", "Total omzet"],
                            0,
                            "#ffeda0",
                            5000000000,
                            "#ffe675",
                            9000000000,
                            "#ffdf52",
                            13000000000,
                            "#ffd61f",
                            17000000000,
                            "#e0b700",
                            20396854609,
                            "#caa502"
                        ],
                        'fill-opacity': 0.7,
                        'fill-outline-color': 'red'
                    },
                    'layout': {
                        'visibility': 'visible'
                    }

                },
                firstSymbolId
            );
        });




        const draw = new MapboxDraw({
            displayControlsDefault: false,
            controls: {
                polygon: true,
                trash: true
            }
        });
        map.addControl(new mapboxgl.NavigationControl());

        map.addControl(draw);

        map.on('draw.create');
        map.on('draw.delete');
        map.on('draw.update');
    </script>



</body>

</html>